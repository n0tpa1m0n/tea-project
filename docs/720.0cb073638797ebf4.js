"use strict";(self.webpackChunktea_shop=self.webpackChunktea_shop||[]).push([[720],{5720:(x,l,i)=>{i.r(l),i.d(l,{OrderModule:()=>E});var s=i(9371),t=i(433),m=i(4466),u=i(8256),c=i(529);let p=(()=>{class e{constructor(r){this.http=r,this.apiUrl="https://testologia.ru/order-tea"}createOrder(r){return this.http.post(this.apiUrl,r)}}return e.\u0275fac=function(r){return new(r||e)(u.LFG(c.eN))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=i(6895);function v(e,n){1&e&&(u.TgZ(0,"div",33),u._uU(1," \u041c\u043e\u0436\u043d\u043e \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b "),u.qZA())}function g(e,n){1&e&&(u.TgZ(0,"div",33),u._uU(1," \u041c\u043e\u0436\u043d\u043e \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b "),u.qZA())}function h(e,n){1&e&&(u.TgZ(0,"div",33),u._uU(1," \u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 11 \u0446\u0438\u0444\u0440 (\u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +) "),u.qZA())}function Z(e,n){1&e&&(u.TgZ(0,"div",33),u._uU(1," \u041c\u043e\u0436\u043d\u043e \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b, \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0434\u0435\u0444\u0438\u0441 \u0438 \u0441\u043b\u0435\u0448 "),u.qZA())}function _(e,n){1&e&&u._UZ(0,"span",34)}function A(e,n){1&e&&(u.TgZ(0,"div",35),u._uU(1," \u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437. "),u.qZA())}function b(e,n){if(1&e){const r=u.EpF();u.TgZ(0,"div",4)(1,"form",5),u.NdJ("ngSubmit",function(){u.CHM(r);const d=u.oxw();return u.KtG(d.onSubmit())}),u.TgZ(2,"div",6)(3,"div",7)(4,"label",8),u._uU(5,"\u0418\u043c\u044f"),u.qZA(),u._UZ(6,"input",9),u.YNc(7,v,2,0,"div",10),u.qZA(),u.TgZ(8,"div",7)(9,"label",11),u._uU(10,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),u.qZA(),u._UZ(11,"input",12),u.YNc(12,g,2,0,"div",10),u.qZA(),u.TgZ(13,"div",7)(14,"label",13),u._uU(15,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),u.qZA(),u._UZ(16,"input",14),u.YNc(17,h,2,0,"div",10),u.qZA()(),u.TgZ(18,"div",15)(19,"div",16)(20,"label",17),u._uU(21,"\u0421\u0442\u0440\u0430\u043d\u0430"),u.qZA(),u._UZ(22,"input",18),u.qZA(),u.TgZ(23,"div",16)(24,"label",19),u._uU(25,"\u0418\u043d\u0434\u0435\u043a\u0441"),u.qZA(),u._UZ(26,"input",20),u.qZA()(),u.TgZ(27,"div",21)(28,"label",22),u._uU(29,"\u0422\u043e\u0432\u0430\u0440"),u.qZA(),u._UZ(30,"input",23),u.qZA(),u.TgZ(31,"div",21)(32,"label",24),u._uU(33,"\u0410\u0434\u0440\u0435\u0441"),u.qZA(),u._UZ(34,"input",25),u.YNc(35,Z,2,0,"div",10),u.qZA(),u.TgZ(36,"div",26)(37,"label",27),u._uU(38,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u043a\u0430\u0437\u0443"),u.qZA(),u._UZ(39,"textarea",28),u.qZA(),u.TgZ(40,"div",29)(41,"button",30),u.YNc(42,_,1,0,"span",31),u._uU(43," \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 "),u.qZA()(),u.YNc(44,A,2,0,"div",32),u.qZA()()}if(2&e){const r=u.oxw();u.xp6(1),u.Q6J("formGroup",r.orderForm),u.xp6(6),u.Q6J("ngIf",r.isFieldInvalid("name")),u.xp6(5),u.Q6J("ngIf",r.isFieldInvalid("last_name")),u.xp6(5),u.Q6J("ngIf",r.isFieldInvalid("phone")),u.xp6(13),u.Q6J("disabled",!0),u.xp6(5),u.Q6J("ngIf",r.isFieldInvalid("address")),u.xp6(6),u.Q6J("disabled",r.orderForm.invalid||r.submitting),u.xp6(1),u.Q6J("ngIf",r.submitting),u.xp6(2),u.Q6J("ngIf",r.orderError)}}function C(e,n){1&e&&(u.TgZ(0,"div",36)(1,"h4",37),u._uU(2,"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437!"),u.qZA(),u.TgZ(3,"p"),u._uU(4,"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d."),u.qZA()())}const I=[{path:"order",component:(()=>{class e{constructor(r,o,d){this.fb=r,this.route=o,this.orderService=d,this.submitting=!1,this.orderSuccess=!1,this.orderError=!1,this.orderForm=this.createForm()}ngOnInit(){const r=this.route.snapshot.queryParamMap.get("product");r&&this.orderForm.patchValue({product:r})}createForm(){return this.fb.group({name:["",[t.kI.required,t.kI.pattern(/^[a-zA-Z\u0430-\u044f\u0410-\u042f\u0451\u0401\s]+$/)]],last_name:["",[t.kI.required,t.kI.pattern(/^[a-zA-Z\u0430-\u044f\u0410-\u042f\u0451\u0401\s]+$/)]],phone:["",[t.kI.required,this.phoneValidator]],country:["",t.kI.required],zip:[""],product:["",t.kI.required],address:["",[t.kI.required,this.addressValidator]],comment:[""]})}phoneValidator(r){const o=r.value||"";if(!o)return null;const d=o.replace(/[^\d]/g,""),a=o.startsWith("+");return a&&!/^\+[0-9]+$/.test(o)?{invalidPhone:!0}:a||/^[0-9]+$/.test(o)?11!==d.length?{invalidPhone:!0}:null:{invalidPhone:!0}}addressValidator(r){const o=r.value||"";return o?/^[a-zA-Z\u0430-\u044f\u0410-\u042f\u0451\u04010-9\s\-\/]+$/.test(o)?null:{invalidAddress:!0}:null}isFieldInvalid(r){const o=this.orderForm.get(r);return!(!o||!o.invalid||!o.dirty&&!o.touched)}onSubmit(){Object.keys(this.orderForm.controls).forEach(r=>{this.orderForm.get(r)?.markAsTouched()}),this.orderForm.valid&&(this.submitting=!0,this.orderError=!1,this.orderService.createOrder(this.orderForm.value).subscribe({next:r=>{this.submitting=!1,1===r.success?this.orderSuccess=!0:this.orderError=!0},error:r=>{console.error("Order error:",r),this.submitting=!1,this.orderError=!0}}))}}return e.\u0275fac=function(r){return new(r||e)(u.Y36(t.qu),u.Y36(s.gz),u.Y36(p))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-order"]],decls:6,vars:2,consts:[[1,"container","mb-5","d-flex","flex-column","align-items-center"],[1,"mb-4","mt-5","pt-4","fw-bold","text-center"],["class","col-lg-6 m-auto",4,"ngIf","ngIfElse"],["successTemplate",""],[1,"col-lg-6","m-auto"],[3,"formGroup","ngSubmit"],[1,"form-row","row","mb-2"],[1,"col","col-lg-4"],["for","nameInput",1,"form-label"],["type","text","id","nameInput","formControlName","name","required","",1,"form-control"],["class","text-danger small",4,"ngIf"],["for","lastNameInput",1,"form-label"],["type","text","id","lastNameInput","formControlName","last_name","required","",1,"form-control"],["for","phoneInput",1,"form-label"],["type","text","id","phoneInput","formControlName","phone","required","",1,"form-control"],[1,"form-row","row","mb-3"],[1,"form-group","col-md-6"],["for","countryInput",1,"form-label"],["type","text","id","countryInput","formControlName","country","required","",1,"form-control"],["for","zipInput",1,"form-label"],["type","number","maxlength","6","id","zipInput","formControlName","zip",1,"form-control"],[1,"form-group","col-md","mb-3"],["for","productInput",1,"form-label"],["type","text","id","productInput","formControlName","product",1,"form-control",3,"disabled"],["for","addressInput",1,"form-label"],["type","text","id","addressInput","formControlName","address","required","",1,"form-control"],[1,"form-group","col-md","mb-4"],["for","commentInput",1,"form-label"],["id","commentInput","formControlName","comment","rows","3",1,"form-control"],[1,"d-grid"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["class","alert alert-danger mt-3 text-center","role","alert",4,"ngIf"],[1,"text-danger","small"],[1,"spinner-border","spinner-border-sm","me-2"],["role","alert",1,"alert","alert-danger","mt-3","text-center"],["role","alert",1,"alert","alert-success","text-center","col-lg-6"],[1,"alert-heading"]],template:function(r,o){if(1&r&&(u.TgZ(0,"div",0)(1,"h2",1),u._uU(2,"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"),u.qZA(),u.YNc(3,b,45,9,"div",2),u.YNc(4,C,5,0,"ng-template",null,3,u.W1O),u.qZA()),2&r){const d=u.MAs(5);u.xp6(3),u.Q6J("ngIf",!o.orderSuccess)("ngIfElse",d)}},dependencies:[f.O5,t._Y,t.Fj,t.wV,t.JJ,t.JL,t.Q7,t.nD,t.sg,t.u]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[m.m,t.UX,s.Bz.forChild(I)]}),e})()}}]);